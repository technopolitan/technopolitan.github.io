!function(a){function j(b,c,d){if("touch"!==c.substr(0,5))return a(b).unbind(c,d);var f;for(f=0;f<k._binds.length;f++)k._binds[f].elem===b&&k._binds[f].type===c&&k._binds[f].func===d&&(document.addEventListener?b.removeEventListener(c,k._binds[f].fnc,!1):b.detachEvent("on"+c,k._binds[f].fnc),k._binds.splice(f--,1))}function k(b,c,d,e){if("touch"!==c.substr(0,5))return a(b).bind(c,e,d);var f;return k[c]?k[c].bind(b,c,d,e):(f=function(a){a||(a=window.event),a.stopPropagation||(a.stopPropagation=function(){this.cancelBubble=!0}),a.data=e,d.call(b,a)},document.addEventListener?b.addEventListener(c,f,!1):b.attachEvent("on"+c,f),void k._binds.push({elem:b,type:c,func:d,fnc:f}))}function l(a,d){var e={move:{x:0,y:0},offset:{x:0,y:0},position:{x:0,y:0},start:{x:0,y:0},affects:document.documentElement,stopPropagation:!1,preventDefault:!0,touch:!0};b(e,d),e.element=a,k(a,c,n,e),e.touch&&k(a,f,q,e)}function m(a){j(a,c,c)}function n(a){a.data.position.x=a.pageX,a.data.position.y=a.pageY,a.data.start.x=a.pageX,a.data.start.y=a.pageY,a.data.event=a,a.data.onstart&&a.data.onstart.call(a.data.element,a.data)||(a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.stopPropagation&&a.stopPropagation(),k(a.data.affects,d,o,a.data),k(a.data.affects,e,p,a.data))}function o(a){a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.preventDefault&&a.stopPropagation(),a.data.move.x=a.pageX-a.data.position.x,a.data.move.y=a.pageY-a.data.position.y,a.data.position.x=a.pageX,a.data.position.y=a.pageY,a.data.offset.x=a.pageX-a.data.start.x,a.data.offset.y=a.pageY-a.data.start.y,a.data.event=a,a.data.onmove&&a.data.onmove.call(a.data.element,a.data)}function p(a){a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.stopPropagation&&a.stopPropagation(),j(a.data.affects,d,o),j(a.data.affects,e,p),a.data.event=a,a.data.onfinish&&a.data.onfinish.call(a.data.element,a.data)}function q(a){a.data.position.x=a.touches[0].pageX,a.data.position.y=a.touches[0].pageY,a.data.start.x=a.touches[0].pageX,a.data.start.y=a.touches[0].pageY,a.data.event=a,a.data.onstart&&a.data.onstart.call(a.data.element,a.data)||(a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.stopPropagation&&a.stopPropagation(),k(a.data.affects,g,r,a.data),k(a.data.affects,h,s,a.data))}function r(a){a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.stopPropagation&&a.stopPropagation(),a.data.move.x=a.touches[0].pageX-a.data.position.x,a.data.move.y=a.touches[0].pageY-a.data.position.y,a.data.position.x=a.touches[0].pageX,a.data.position.y=a.touches[0].pageY,a.data.offset.x=a.touches[0].pageX-a.data.start.x,a.data.offset.y=a.touches[0].pageY-a.data.start.y,a.data.event=a,a.data.onmove&&a.data.onmove.call(a.data.elem,a.data)}function s(a){a.preventDefault&&a.data.preventDefault&&a.preventDefault(),a.stopPropagation&&a.data.stopPropagation&&a.stopPropagation(),j(a.data.affects,g,r),j(a.data.affects,h,s),a.data.event=a,a.data.onfinish&&a.data.onfinish.call(a.data.element,a.data)}var b=a.extend,c="mousedown",d="mousemove",e="mouseup",f="touchstart",g="touchmove",h="touchend";k._binds=[],a.fn.grab=function(a,b){return this.each(function(){return l(this,a,b)})},a.fn.ungrab=function(a){return this.each(function(){return m(this,a)})}}(jQuery);